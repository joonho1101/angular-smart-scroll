/*! angular-smart-scroll - v0.0.3 - 2014-07-13 */
angular.module("jun.smartScroll",[]).directive("smartScroll",["$window","$timeout",function(a,b){"use strict";function c(a){if(a.style){var b=x(a);return d(b.css("overflow"))||d(b.css("overflow-x"))||d(b.css("overflow-y"))}return!1}function d(a){return"scroll"===a||"auto"===a}function e(a,b){for(;a;){if(b(a))return a;a=a.parentNode}return null}function f(a,b){return a?"number"==typeof a?a:"%"===a.charAt(a.length-1)?parseInt(a,10)/100*b:parseInt(a,10):0}function g(a,b){return f(a,b)+y}function h(a,b){return null!=b&&b>a}function i(a){var b=a.viewport,c=b.scrollTop(),d=a.remainingTop;if(a.remainingTop=c,h(c,d)){var e=t(a,"distanceTop");if(null==e)return a.onScrollTop();var f=b.innerHeight();return c<=g(e,f)?a.onScrollTop():void 0}}function j(a){var b=a.viewport,c=b.scrollLeft(),d=a.remainingLeft;if(a.remainingLeft=c,h(c,d)){var e=t(a,"distanceLeft");if(null==e)return a.onScrollLeft();var f=b.innerWidth();c<=g(e,f)&&a.onScrollLeft()}}function k(a,b,c){return c-(a+b)}function l(a){return a.html||(a.html=x("html")[0])}function m(a){return a.body||(a.body=x("body")[0])}function n(b,c){return b===a?l(c).scrollWidth||m(c).scrollWidth:b.scrollWidth}function o(b,c){return b===a?l(c).scrollHeight||m(c).scrollHeight:b.scrollHeight}function p(a){a=a||this;var b=a.viewport,c=b.scrollTop(),d=b.innerHeight(),e=o(b[0],a),f=k(c,d,e);return{scrollPos:c,viewportLength:d,scrollLength:e,remaining:f}}function q(a){var b=p(a),c=b.remaining,d=a.remainingBottom;if(a.remainingBottom=c,h(c,d)){var e=t(a,"distanceBottom");return null==e?a.onScrollBottom():c<=g(e,b.viewportLength)?a.onScrollBottom():void 0}}function r(a){a=a||this;var b=a.viewport,c=b.scrollLeft(),d=b.innerWidth(),e=n(b[0],a),f=k(c,d,e);return{scrollPos:c,viewportLength:d,scrollLength:e,remaining:f}}function s(a){var b=r(a),c=b.remaining,d=a.remainingRight;if(a.remainingRight=c,h(c,d)){var e=t(a,"distanceRight");return null==e?a.onScrollRight():c<=g(e,b.viewportLength)?a.onScrollRight():void 0}}function t(a,b){var c=a[b];return"function"==typeof c?a[b]():c}function u(a){return function(){t(a,"disabled")||(!t(a,"disabledTop")&&a.onScrollTop&&i(a),!t(a,"disabledBottom")&&a.onScrollBottom&&q(a),!t(a,"disabledLeft")&&a.onScrollLeft&&j(a),!t(a,"disabledRight")&&a.onScrollRight&&s(a),a.onScroll&&a.onScroll())}}function v(b,d){var f=b.viewport||e(d[0],c)||a;return"function"!=typeof f.on&&(f=x(f)),f}function w(a){for(;a;){if(a.smartScroll)return a.smartScroll;a=a.$parent}}var x=angular.element,y=.9;return{link:function(a,c){var d=w(a)||{},e=d.viewport=v(d,c),f=u(d);d.getScrollRightStats=r,d.getScrollBottomStats=p,e.on("scroll",f),e.on("resize",f),a.$on("$destroy",function(){e.off("scroll",f),e.off("resize",f)}),b(f)}}}]);