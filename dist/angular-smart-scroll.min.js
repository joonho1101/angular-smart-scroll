/*! angular-smart-scroll - v0.0.2 - 2014-04-24 */
angular.module("jun.smartScroll",[]).directive("smartScroll",["$rootScope","$window","$timeout",function(a,b,c){"use strict";function d(a){if(a.style){var b=o(a);return e(b.css("overflow"))||e(b.css("overflow-y"))}return!1}function e(a){return"scroll"===a||"auto"===a}function f(a,b){for(;a;){if(b(a))return a;a=a.parentNode}return null}function g(a,b){return a?"string"==typeof a?h(a,"%")?parseInt(a,10)/100*b:parseInt(a,10):a:0}function h(a,b){return a===b||-1!==a.indexOf(b,a.length-b.length)}function i(a){return a===b&&(a=n||(n=o("html")[0])),a.scrollHeight}function j(a,b){var c=b.scrollTop(),d=c,e=.9,f=b.innerHeight(),h=g(a.distance,f)+e;h>=d&&a.next({scrollTop:c,height:f,remaining:d})}function k(a,b){var c=i(b[0]),d=b.scrollTop(),e=b.innerHeight(),f=d+e,h=c-f,j=.9,k=g(a.distance,e)+j;k>=h&&a.next({scrollHeight:c,scrollTop:d,height:e,scrollBottom:f,remaining:h})}function l(a,b){return function(){a.disabled||("up"===a.direction?j(a,b):k(a,b))}}function m(a,c){var d=b._;if(!d||"function"!=typeof d.throttle)return c;var e=a.throttle,f=300;switch(typeof e){case"number":f=e;break;case"object":if(e)return null!=e.wait&&(f=e.wait),d.throttle(c,f,e)}return d.throttle(c,f)}var n,o=angular.element;return{scope:{distance:"=scrollDistance",disabled:"=scrollDisabled",direction:"=scrollDirection",throttle:"=scrollThrottle",next:"&scrollNext",data:"=scrollData"},link:function(a,e){var g=f(e[0],d)||b;g=angular.element(g),a.data&&(a.data.viewport=g);var h=l(a,g),i=m(a,h);a.$watch("distance",h),a.$watch("disabled",h),a.$watch("direction",h),g.on("scroll",i),a.$on("$destroy",function(){g.off("scroll",i)}),c(h)}}}]);